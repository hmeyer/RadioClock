#ifndef CHARARCTER_H
#define CHARARCTER_H

#include <avr/io.h>
#include <avr/pgmspace.h>

extern const uint8_t _cosine[] PROGMEM;
const uint8_t _cosine[] = {255, 255, 255, 255, 255, 255, 254, 254, 253, 252, 252, 251, 250, 249, 248, 247, 246, 245, 243, 242, 240, 239, 237, 236, 234, 232, 230, 228, 226, 224, 222, 220, 218, 216, 213, 211, 209, 206, 204, 201, 199, 196, 193, 191, 188, 185, 182, 179, 176, 174, 171, 168, 165, 162, 159, 156, 152, 149, 146, 143, 140, 137, 134, 131, 127, 124, 121, 118, 115, 112, 109, 106, 103, 99, 96, 93, 90, 87, 84, 81, 79, 76, 73, 70, 67, 64, 62, 59, 56, 54, 51, 49, 46, 44, 42, 39, 37, 35, 33, 31, 29, 27, 25, 23, 21, 19, 18, 16, 15, 13, 12, 10, 9, 8, 7, 6, 5, 4, 3, 3, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 2, 3, 3, 4, 5, 6, 7, 8, 9, 10, 12, 13, 15, 16, 18, 19, 21, 23, 25, 27, 29, 31, 33, 35, 37, 39, 42, 44, 46, 49, 51, 54, 56, 59, 62, 64, 67, 70, 73, 76, 79, 81, 84, 87, 90, 93, 96, 99, 103, 106, 109, 112, 115, 118, 121, 124, 127, 131, 134, 137, 140, 143, 146, 149, 152, 156, 159, 162, 165, 168, 171, 174, 176, 179, 182, 185, 188, 191, 193, 196, 199, 201, 204, 206, 209, 211, 213, 216, 218, 220, 222, 224, 226, 228, 230, 232, 234, 236, 237, 239, 240, 242, 243, 245, 246, 247, 248, 249, 250, 251, 252, 252, 253, 254, 254, 255, 255, 255, 255, 255 };



#define i(c) ((uint8_t)(c==' '?0:1))
#define b(s,o) ((uint8_t)(\
  (i(s[0+o]) << 7) |\
  (i(s[1+o]) << 6) |\
  (i(s[2+o]) << 5) |\
  (i(s[3+o]) << 4) |\
  (i(s[4+o]) << 3)))
  
#define Character(s) { b(s,0),b(s,5),b(s,10),b(s,15),b(s,20),b(s,25),b(s,30),b(s,35) }

//const uint8_t _charset[][8] PROGMEM = {
const uint8_t _charset[][8]  = {
Character( // 32 = SP
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 33 = !
" @@  "
" @@  "
" @@  "
" @@  "
" @@  "
"     "
" @@  "
" @@  "
),
Character( // 34 = "
" @ @ "
" @ @ "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 35 = #
"     "
" @ @ "
"@@@@@"
" @ @ "
"@@@@@"
" @ @ "
"     "
"     "
),
Character( // 36 = $
"  @  "
" @@@@"
"@ @  "
" @@@ "
"  @ @"
"  @ @"
"@@@@ "
"  @  "
),
Character( // 37 = %
"@@  @"
"@@ @ "
"   @ "
"  @  "
"  @  "
" @   "
" @ @@"
"@  @@"
),
Character( // 38 = &
"     "
"     "
" @   "
"@ @  "
" @   "
"@ @ @"
"@  @ "
" @@ @"
),
Character( // 39 = '
"  @  "
"  @  "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 40 = (
"   @ "
"  @  "
"  @  "
" @   "
" @   "
"  @  "
"  @  "
"   @ "
),
Character( // 41 = )
" @   "
"  @  "
"  @  "
"   @ "
"   @ "
"  @  "
"  @  "
" @   "
),
Character( // 42 = *
"     "
"  @  "
"@ @ @"
" @@@ "
" @ @ "
"@   @"
"     "
"     "
),
Character( // 43 = +
"     "
"  @  "
"  @  "
"@@@@@"
"  @  "
"  @  "
"     "
"     "
),
Character( // 44 = ,
"     "
"     "
"     "
"     "
"     "
"  @@ "
"  @@ "
"   @ "
),
Character( // 45 = -
"     "
"     "
"     "
"@@@@@"
"     "
"     "
"     "
"     "
),
Character( // 46 = .
"     "
"     "
"     "
"     "
"     "
"     "
" @@  "
" @@  "
),
Character( // 47 = /
"    @"
"   @ "
"   @ "
"  @  "
"  @  "
" @   "
" @   "
"@    "
),
Character( // 48 = 0
" @@@ "
"@   @"
"@  @@"
"@ @ @"
"@ @ @"
"@@  @"
"@   @"
" @@@ "
),
Character( // 49 = 1
"  X  "
" XX  "
"  X  "
"  X  "
"  X  "
"  X  "
"  X  "
"  X  "
),
Character( // 50 = 2
" @@@ "
"@   @"
"    @"
"   @ "
"  @  "
" @   "
"@    "
"@@@@@"
),
Character( // 51 = 3
" @@@ "
"@   @"
"    @"
"  @@ "
"    @"
"    @"
"@   @"
" @@@ "
),
Character( // 52 = 4
"   X "
"  XX "
" X X "
" X X "
"X  X "
"XXXXX"
"   X "
"   X "
),
Character( // 53 = 5
"@@@@@"
"@    "
"@    "
"@@@@ "
"    @"
"@   @"
"@   @"
" @@@ "
),
Character( // 54 = 6
" @@@ "
"@   @"
"@    "
"@@@@ "
"@   @"
"@   @"
"@   @"
" @@@ "
),
Character( // 55 = 7
"@@@@@"
"    @"
"   @ "
"   @ "
"  @  "
"  @  "
" @   "
" @   "
),
Character( // 56 = 8
" @@@ "
"@   @"
"@   @"
" @@@ "
"@   @"
"@   @"
"@   @"
" @@@ "
),
Character( // 57 = 9
" @@@ "
"@   @"
"@   @"
" @@@@"
"    @"
"    @"
"@   @"
" @@@ "
),
Character( // 58 = :
"     "
"     "
" @@  "
" @@  "
"     "
"     "
" @@  "
" @@  "
),
Character( // 59 = ;
"     "
"     "
" @@  "
" @@  "
"     "
" @@  "
" @@  "
"  @  "
),
Character( // 60 = <
"    @"
"   @ "
"  @  "
" @   "
"  @  "
"   @ "
"    @"
"     "
),
Character( // 61 = =
"     "
"     "
"@@@@@"
"     "
"@@@@@"
"     "
"     "
"     "
),
Character( // 62 = >
"@    "
" @   "
"  @  "
"   @ "
"  @  "
" @   "
"@    "
"     "
),
Character( // 63 = ?
"@@@@ "
"    @"
"    @"
"  @@ "
" @@  "
"     "
" @@  "
" @@  "
),
Character( // 64 = @
" @@@ "
"@   @"
"@ @ @"
"@ @ @"
"@ @ @"
"@ @@@"
"@    "
" @@@ "
),
Character( // 65 = A
"XXXX "
"X   X"
"X   X"
"XXXXX"
"X   X"
"X   X"
"X   X"
"X   X"
),
Character( // 66 = B
"XXX  "
"X  X "
"X  X "
"XXXX "
"X   X"
"X   X"
"X   X"
"XXXX "
),
Character( // 67 = C
" XXX "
"X   X"
"X    "
"X    "
"X    "
"X    "
"X   X"
" XXX "
),
Character( // 68 = D
"XXX  "
"X  X "
"X   X"
"X   X"
"X   X"
"X   X"
"X   X"
"XXXX "
),
Character( // 69 = E
" XXXX"
"X    "
"X    "
"XXXX "
"X    "
"X    "
"X    "
"XXXXX"
),
Character( // 70 = F
" XXXX"
"X    "
"X    "
"XXX  "
"X    "
"X    "
"X    "
"X    "
),
Character( // 71 = G
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 72 = H
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 73 = I
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 74 = J
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 75 = K
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 76 = L
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 77 = M
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 78 = N
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 79 = O
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 80 = P
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 81 = Q
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 82 = R
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 83 = S
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 84 = T
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 85 = U
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 86 = V
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 87 = W
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 88 = X
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 89 = Y
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 90 = Z
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 91 = [
"  @@@"
"  @  "
"  @  "
"  @  "
"  @  "
"  @  "
"  @  "
"  @@@"
),
Character( // 92 = Backslash
"@    "
" @   "
" @   "
"  @  "
"  @  "
"   @ "
"   @ "
"    @"
),
Character( // 93 = ]
"@@@  "
"  @  "
"  @  "
"  @  "
"  @  "
"  @  "
"  @  "
"@@@  "
),
Character( // 94 = ^
"  @  "
" @ @ "
"@   @"
"     "
"     "
"     "
"     "
"     "
),
Character( // 95 = _
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"@@@@@"
),
Character( // 96 = '
" @   "
" @   "
"  @  "
"     "
"     "
"     "
"     "
"     "
),
Character( // 97 = a
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 98 = b
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 99 = c
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 100 = d
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 101 = e
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 102 = f
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 103 = g
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 104 = h
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 105 = i
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 106 = j
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 107 = k
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 108 = l
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 109 = m
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 110 = n
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 111 = o
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 112 = p
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 113 = q
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 114 = r
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 115 = s
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 116 = t
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 117 = u
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 118 = v
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 119 = w
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 120 = x
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 121 = y
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 122 = z
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 123 = {
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 124 = |
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 125 = }
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 126 = ~
"     "
"     "
"     "
"     "
"     "
"     "
"     "
"     "
),
Character( // 127 = invalid
"@@@@@"
"@   @"
"@@ @@"
"@ @ @"
"@ @ @"
"@@ @@"
"@   @"
"@@@@@"
)
};

inline const uint8_t cosine(uint8_t x) { return pgm_read_byte(&(_cosine[x])); }
//inline const uint8_t charset(uint8_t c, uint8_t line) { return pgm_read_byte(&(_charset[c][line])); }
inline const uint8_t charset(uint8_t c, uint8_t line) { return _charset[c][line]; }

#undef b
#undef i

#define mono2HighByte(c) ((uint8_t)\
  (c&0x80) | ((c>>1)&0x20) | ((c>>2)&0x08) | ((c>>3)&0x02)\
)

#define mono2LowByte(c) ((uint8_t)\
  (c&0x01) | ((c<<1)&0x04) | ((c<<2)&0x10) | ((c<<3)&0x40)\
)

#define mono2HighColorByte(c) ((uint8_t)mono2HighByte(c)|(mono2HighByte(c)>>1))
#define mono2LowColorByte(c) ((uint8_t)mono2LowByte(c)|(mono2LowByte(c)<<1))

#endif //CHARACTER_H

